{"version":3,"sources":["scripts/main.js"],"names":["forms","document","querySelectorAll","icons","getElementsByClassName","i","length","addEventListener","clickedIconId","id","classList","add","getElementById","remove","validateEmail","email","re","test","String","toLowerCase","validateText","inputText","input","getAttribute","validatePhone","phone","addError","hasAttribute","parentElement","inputErrorText","value","nextElementSibling","textContent","removeError","forEach","form","formInputs","cardFormInputs","inputEmail","querySelector","inputPhone","inputPlaceholder","onfocus","contains","onblur","closest","parentNode","onsubmit","e","preventDefault","emptyInputs","Array","from","filter","emptyCardFormInputs","textVal","emailVal","phonelVal","animItems","scrollVertical","window","scrollY","scrollHorizontal","scrollX","animOnScroll","params","index","animItem","animItemHeight","offsetHeight","animItemOffset","offset","top","animItemPoint","innerHeight","el","rect","getBoundingClientRect","scrollLeft","documentElement","scrollTop","left","setTimeout"],"mappings":"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","file":"main.e0a3f7c4.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\n// Form\nconst forms = document.querySelectorAll('.form');\nconst icons = document.getElementsByClassName('card-form__image');\n\nfor (let i = 0; i < icons.length; i++) {\n  icons[i].addEventListener('click', function() {\n    const clickedIconId = this.id;\n\n    this.classList.add('_hidden');\n\n    switch (clickedIconId) {\n      case 'visa':\n        document.getElementById('master-card').classList.remove('_hidden');\n        break;\n      case 'master-card':\n        document.getElementById('visa').classList.remove('_hidden');\n        break;\n    }\n  });\n}\n\nfunction validateEmail(email) {\n  const re = /^([A-Za-z0-9_\\-.])+@([A-Za-z0-9_\\-.])+.([A-Za-z]{2,4})$/;\n\n  return re.test(String(email).toLowerCase());\n}\n\nfunction validateText(inputText, input) {\n  const reText = /^[a-zA-Z\\s`'-]{2,100}$/;\n  const reAddress = /^.{20,200}$/;\n\n  if (input && input.getAttribute('name') === 'shipping-address') {\n    return reAddress.test(String(inputText).toLowerCase());\n  } else {\n    return reText.test(String(inputText).toLowerCase());\n  }\n}\n\nfunction validatePhone(phone) {\n  const re = /^(?=[+\\d\\s()-]{7,20}$)[+\\d\\s()-]+$/;\n\n  return re.test(String(phone).toLowerCase());\n}\n\nfunction addError(input) {\n  if (input.hasAttribute('required')) {\n    input.parentElement.classList.add('_error');\n    input.classList.add('_error');\n\n    const inputErrorText = input.getAttribute('data-error');\n\n    if (inputErrorText && inputErrorText !== '') {\n      input.value = '';\n      input.classList.remove('_complete');\n      input.nextElementSibling.textContent = inputErrorText;\n    }\n\n    // if (input.nextElementSibling\n    //   && input.nextElementSibling.classList.toString().includes('__label')\n    // ) {\n    //   input.value = '';\n    //   input.classList.remove('_complete');\n    //   input.nextElementSibling.textContent = inputErrorText;\n    // }\n  } else {\n    removeError(input);\n  }\n}\n\nfunction removeError(input) {\n  input.classList.remove('_error');\n  input.parentElement.classList.remove('_error');\n\n  input.value = '';\n  input.classList.remove('_complete');\n}\n\nforms.forEach(function(form) {\n  const formInputs = form.querySelectorAll('.form__input');\n  const cardFormInputs = form.querySelectorAll('.card-form__input');\n  const inputEmail = form.querySelector('.form__input--email');\n  const inputPhone = form.querySelector('.form__input--phone');\n\n  formInputs.forEach(function(input) {\n    const inputPlaceholder = input.getAttribute('data-placeholder');\n\n    input.nextElementSibling.textContent = inputPlaceholder;\n\n    input.onfocus = function() {\n      const inputErrorText = input.getAttribute('data-error');\n\n      if (inputErrorText) {\n        input.nextElementSibling.textContent = inputPlaceholder;\n      }\n\n      if (this.classList.contains('_error')) {\n        removeError(this);\n        this.value = '';\n      }\n    };\n\n    input.onblur = function() {\n      if (input.value !== '') {\n        input.classList.add('_complete');\n      } else {\n        input.classList.remove('_complete');\n      }\n    };\n  });\n\n  cardFormInputs.forEach(function(input) {\n    input.onfocus = function() {\n      if (input.closest('.card-form--number')) {\n        this.parentNode.classList.add('_active');\n      }\n\n      if (this.classList.contains('_error')) {\n        removeError(this);\n        // this.value = '';\n      }\n    };\n\n    input.onblur = function() {\n      this.parentNode.classList.remove('_active');\n\n      if (input.value !== '') {\n        input.classList.add('_complete');\n      } else {\n        input.classList.remove('_complete');\n      }\n    };\n  });\n\n  form.onsubmit = function(e) {\n    e.preventDefault();\n\n    const emptyInputs = Array.from(formInputs).filter(\n      input => input.value === ''\n    );\n\n    const emptyCardFormInputs = Array.from(cardFormInputs).filter(\n      input => input.value === ''\n    );\n\n    formInputs.forEach(function(input) {\n      if (input.value === '' && emptyInputs.length > 0) {\n        addError(input);\n\n        return false;\n      }\n\n      if (input.getAttribute('type') === 'text') {\n        const textVal = input.value;\n\n        if (validateText && !validateText(textVal, input)) {\n          addError(input);\n\n          return false;\n        } else {\n          removeError(input);\n        }\n      }\n\n      if (input === inputEmail && inputEmail.value) {\n        const emailVal = inputEmail.value;\n\n        if (validateEmail && !validateEmail(emailVal)) {\n          addError(input);\n\n          return false;\n        } else {\n          removeError(input);\n        }\n      }\n\n      if (input === inputPhone && inputPhone.value) {\n        const phonelVal = inputPhone.value;\n\n        if (validatePhone && !validatePhone(phonelVal)) {\n          addError(input);\n\n          return false;\n        } else {\n          removeError(input);\n        }\n      }\n\n      removeError(input);\n    });\n\n    if (cardFormInputs && cardFormInputs.length > 0) {\n      cardFormInputs.forEach(function(input) {\n        if (input.value === '' && emptyCardFormInputs.length > 0) {\n          addError(input);\n          // input.classList.add('_error');\n\n          return false;\n        } else {\n          removeError(input);\n          // input.classList.remove('_error');\n        }\n      });\n    }\n\n    // if (form.closest('.order__card')) {\n    //   const hasError = form.querySelector('input._error');\n\n    //   if (hasError) {\n    //     form.closest('.order__card').classList.add('_error');\n    //   } else {\n    //     form.closest('.order__card').classList.remove('_error');\n    //   }\n    // }\n  };\n});\n\n// Animation with scroll\nconst animItems = document.querySelectorAll('._anim-item');\nconst scrollVertical = window.scrollY;\nconst scrollHorizontal = window.scrollX;\n\nfunction animOnScroll(params) {\n  for (let index = 0; index < animItems.length; index++) {\n    const animItem = animItems[index];\n    const animItemHeight = animItem.offsetHeight;\n    const animItemOffset = offset(animItem).top;\n    const animstart = 4;\n    let animItemPoint = window.innerHeight - animItemHeight / animstart;\n\n    if (animItemHeight > window.innerHeight) {\n      animItemPoint = window.innerHeight - window.innerHeight / animstart;\n    }\n\n    if (scrollVertical > (animItemOffset - animItemPoint)\n    && scrollVertical < (animItemOffset + animItemHeight)) {\n      animItem.classList.add('_active');\n    } else {\n      if (!animItem.classList.contains('_anim-stop')) {\n        animItem.classList.remove('_active');\n      }\n    }\n  }\n}\n\nfunction offset(el) {\n  const rect = el.getBoundingClientRect();\n  const scrollLeft = scrollHorizontal || document.documentElement.scrollLeft;\n  const scrollTop = scrollVertical || document.documentElement.scrollTop;\n\n  return {\n    top: rect.top + scrollTop,\n    left: rect.left + scrollLeft,\n  };\n}\n\nif (animItems.length > 0) {\n  window.addEventListener('scroll', animOnScroll);\n\n  setTimeout(() => {\n    animOnScroll();\n  }, 300);\n}\n"]}